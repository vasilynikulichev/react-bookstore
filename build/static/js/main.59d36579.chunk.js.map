{"version":3,"sources":["components/shop-header/index.js","components/shop-header/shop-header.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/spinner/index.js","components/spinner/Spinner.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/bookstore-service-context/bookstore-service-context.js","components/hoc/with-bookstore-service.js","actions/index.js","utils/compose.js","components/book-list/book-list.js","components/book-list/index.js","components/pages/home-page.js","components/shopping-cart-table/shopping-cart-table.js","components/pages/cart-page.js","components/app/index.js","components/app/App.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/bookstore-service.js","reducers/book-list.js","reducers/shoppingCart.js","reducers/index.js","store.js","index.js"],"names":["ShopHeader","numItems","total","className","to","BookListItem","book","onAddedToCart","title","author","price","coverImage","src","alt","onClick","Spinner","ErrorIndicator","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","WithBookstoreService","Wrapped","props","bookstoreService","bookAddedToCart","bookId","type","payload","fetchBooks","dispatch","getBooks","then","data","catch","err","compose","funcs","comp","reduceRight","wrapped","f","BookList","books","map","key","id","BookListContainer","this","loading","error","Component","withBookstoreService","connect","bookList","HomePage","mapDispatchToProps","onIncrease","onDecrease","onDelete","shoppingCart","items","cartItems","orderTotal","item","index","count","CartPage","App","role","length","path","component","exact","ErrorBoundry","state","hasError","errorInfo","setState","children","BookstoreService","Promise","resolve","reject","setTimeout","Math","random","Error","updateBookList","action","undefined","updateOrder","quantity","oldCartItems","find","itemIndex","findIndex","slice","updateCartItems","updateCartItem","reduce","accumulator","currentValue","updateShoppingCart","reducer","store","createStore","ReactDom","render","value","document","getElementById"],"mappings":"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","file":"static/js/main.59d36579.chunk.js","sourcesContent":["import ShopHeader from './shop-header';\n\nexport default ShopHeader;","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport './shop-header.css';\n\nconst ShopHeader = ({ numItems, total }) => {\n    return (\n        <header className=\"shop-header row\">\n            <Link to=\"/\" className=\"logo text-dark\">ReStore</Link>\n            <Link to=\"/cart\" className=\"shopping-cart\">\n                <i className=\"cart-icon fa fa-shopping-cart\" />\n                {numItems} items (${total})\n            </Link>\n        </header>\n    );\n};\n\nexport default ShopHeader;","import BookListItem from './book-list-item';\n\nexport default BookListItem;","import React from 'react';\nimport './book-list-item.css';\n\nconst BookListItem = ({ book, onAddedToCart }) => {\n\tconst { title, author, price, coverImage } = book;\n\treturn (\n\t\t<div className=\"book-list-item\">\n\t\t\t<div className=\"book-cover\">\n\t\t\t\t<img src={coverImage} alt=\"cover\" />\n\t\t\t</div>\n\t\t\t<div className=\"book-details\">\n\t\t\t\t<span className=\"book-title\">{title}</span>\n\t\t\t\t<div className=\"book-author\">{author}</div>\n\t\t\t\t<div className=\"book-price\">${price}</div>\n\t\t\t\t<button\n\t\t\t\t\tonClick={onAddedToCart}\n\t\t\t\t\tclassName=\"btn btn-info add-to-cart\"\n\t\t\t\t>Add to cart</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default BookListItem;","import Spinner from './Spinner';\n\nexport default Spinner;","import React from 'react';\nimport './spinner.css';\n\nconst Spinner = () => {\n\treturn <div>Loading...</div>\n};\n\nexport default Spinner;","import ErrorIndicator from './error-indicator';\n\nexport default ErrorIndicator;","import React from 'react';\nimport './error-indicator.css';\n\nconst ErrorIndicator = () => {\n\treturn <div>Error!</div>;\n};\n\nexport default ErrorIndicator;","import React from 'react';\n\nconst {\n\tProvider: BookstoreServiceProvider,\n\tConsumer: BookstoreServiceConsumer,\n} = React.createContext();\n\nexport {\n\tBookstoreServiceProvider,\n\tBookstoreServiceConsumer,\n};","import React from 'react';\nimport { BookstoreServiceConsumer } from '../bookstore-service-context';\n\nconst WithBookstoreService = () => (Wrapped) => {\n\treturn (props) => {\n\t\treturn(\n\t\t\t<BookstoreServiceConsumer>\n\t\t\t\t{\n\t\t\t\t\t(bookstoreService ) => {\n\t\t\t\t\t\treturn <Wrapped {...props} bookstoreService={bookstoreService}/>;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t</BookstoreServiceConsumer>\n\t\t);\n\t};\n};\n\nexport default WithBookstoreService;","const booksLoaded = (newBooks) => {\n\treturn {\n\t\ttype: 'FETCH_BOOKS_REQUEST',\n\t\tpayload: newBooks,\n\t};\n};\n\nconst booksRequested = () => {\n\treturn {\n\t\ttype: 'FETCH_BOOKS_SUCCESS',\n\t};\n};\n\nconst booksError = (error) => {\n\treturn {\n\t\ttype: 'FETCH_BOOKS_FAILURE',\n\t\tpayload: error,\n\t};\n};\n\nconst bookAddedToCart = (bookId) => {\n\treturn {\n\t\ttype: 'BOOK_ADDED_TO_CART',\n\t\tpayload: bookId,\n\t}\n};\n\nconst bookRemovedFromCart = (bookId) => {\n\treturn {\n\t\ttype: 'BOOK_REMOVED_FROM_CART',\n\t\tpayload: bookId,\n\t}\n};\n\nconst allBooksRemovedFromCart = (bookId) => {\n\treturn {\n\t\ttype: 'ALL_BOOKS_REMOVED_FROM_CART',\n\t\tpayload: bookId,\n\t}\n};\n\nconst fetchBooks = (dispatch, bookstoreService) => () => {\n    dispatch(booksRequested());\n    bookstoreService.getBooks()\n        .then((data) => dispatch(booksLoaded(data)))\n        .catch((err) => dispatch(booksError(err)));\n};\n\nexport {\n    fetchBooks,\n\tbookAddedToCart,\n\tbookRemovedFromCart,\n\tallBooksRemovedFromCart,\n};","const compose = (...funcs) => (comp) => {\n    return funcs.reduceRight((wrapped, f) => f(wrapped), comp);\n};\n\nexport default compose;","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport BookListItem from '../book-list-item';\nimport Spinner from '../spinner';\nimport ErrorIndicator from '../error-indicator';\n\nimport { withBookstoreService } from '../hoc';\nimport { fetchBooks, bookAddedToCart } from '../../actions';\nimport { compose } from '../../utils';\n\nimport './book-list.css';\n\nconst BookList = ({books, onAddedToCart}) => {\n\treturn (\n\t\t<ul className=\"bool-list\">\n\t\t\t{\n\t\t\t\tbooks.map((book) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li key={book.id}>\n\t\t\t\t\t\t\t<BookListItem\n\t\t\t\t\t\t\t\tbook={book}\n\t\t\t\t\t\t\t\tonAddedToCart={() => onAddedToCart(book.id)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t}\n\t\t</ul>\n\t);\n};\n\nclass BookListContainer extends Component {\n\tcomponentDidMount() {\n\t\tthis.props.fetchBooks();\n\t}\n\n\trender() {\n\t\tconst { books, loading, error, onAddedToCart } = this.props;\n\n\t\tif (loading) {\n\t\t\treturn <Spinner/>;\n\t\t}\n\n\t\tif (error) {\n\t\t\treturn <ErrorIndicator/>;\n\t\t}\n\n\t\treturn <BookList\n\t\t\tbooks={books}\n\t\t\tonAddedToCart={onAddedToCart}\n\t\t/>\n\t}\n}\n\nconst mapStateToProps = ({ bookList: { books, loading, error }}) => {\n\treturn {\n\t\tbooks,\n\t\tloading,\n\t\terror,\n\t};\n};\n\nconst mapDispatchToProps = (dispatch, { bookstoreService }) => {\n\treturn {\n\t\tfetchBooks: fetchBooks(dispatch, bookstoreService),\n\t\tonAddedToCart: (id) => dispatch(bookAddedToCart(id)),\n\t}\n};\n\nexport default compose(\n\twithBookstoreService(),\n\tconnect(mapStateToProps, mapDispatchToProps)\n)(BookListContainer);","import BookList from './book-list';\n\nexport default BookList;","import React from 'react';\nimport BookList from '../book-list';\n\nconst HomePage = () => {\n\treturn (\n\t\t<div>\n\t\t\t<BookList />\n\t\t</div>\n\t);\n};\n\nexport default HomePage;","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n    bookAddedToCart,\n    bookRemovedFromCart,\n    allBooksRemovedFromCart,\n} from '../../actions';\n\nimport './shopping-cart-table.css';\n\nconst ShoppingCartTable = ({ items, total, onIncrease, onDecrease, onDelete}) => {\n    const renderRow = (item, index) => {\n        const { id, title, count, total } = item;\n        return (\n            <tr key={id}>\n                <td>{index + 1}</td>\n                <td>{title}</td>\n                <td>{count}</td>\n                <td>${total}</td>\n                <td>\n                    <button\n                        onClick={() => onDelete(id)}\n                        className=\"btn btn-outline-danger btn-sm float-right\"\n                    >\n                        <i className=\"fa fa-trash-o\" />\n                    </button>\n                    <button\n                        onClick={() => onIncrease(id)}\n                        className=\"btn btn-outline-success btn-sm float-right\"\n                    >\n                        <i className=\"fa fa-plus-circle\" />\n                    </button>\n                    <button\n                        onClick={() => onDecrease(id)}\n                        className=\"btn btn-outline-warning btn-sm float-right\"\n                    >\n                        <i className=\"fa fa-minus-circle\" />\n                    </button>\n                </td>\n            </tr>\n        );\n    };\n\n    return (\n        <div className=\"shopping-cart-table\">\n            <h2>Your Order</h2>\n            <table className=\"table\">\n                <thead>\n                <tr>\n                    <th>#</th>\n                    <th>Item</th>\n                    <th>Count</th>\n                    <th>Price</th>\n                    <th>Action</th>\n                </tr>\n                </thead>\n\n                <tbody>\n                    {items.map(renderRow)}\n                </tbody>\n            </table>\n\n            <div className=\"total\">\n                Total: ${total}\n            </div>\n        </div>\n    );\n};\n\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal }}) => {\n    return {\n        items: cartItems,\n        total: orderTotal,\n    };\n};\n\nconst mapDispatchToProps = {\n    onIncrease: bookAddedToCart,\n    onDecrease: bookRemovedFromCart,\n    onDelete: allBooksRemovedFromCart,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);\n","import React from 'react';\nimport ShoppingCartTable from '../shopping-cart-table/shopping-cart-table';\n\nconst CartPage = () => {\n\treturn (\n\t\t<div>\n\t\t\t<ShoppingCartTable/>\n\t\t</div>\n\t);\n};\n\nexport default CartPage;","import App from \"./App\";\n\nexport default App;","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport ShopHeader from '../shop-header';\nimport {\n    HomePage,\n    CartPage,\n} from '../pages';\n\nimport './app.css';\n\nconst App = ({items, total}) => {\n    return (\n        <main role=\"main\" className=\"container\">\n            <ShopHeader numItems={items.length} total={total}/>\n            <Switch>\n                <Route\n                    path=\"/\"\n                    component={HomePage}\n                    exact />\n\n                <Route\n                    path=\"/cart\"\n                    component={CartPage}\n                />\n            </Switch>\n        </main>\n    );\n};\n\n\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal }}) => {\n    return {\n        items: cartItems,\n        total: orderTotal,\n    };\n};\n\nexport default connect(mapStateToProps)(App);","import ErrorBoundry from './error-boundry';\n\nexport default ErrorBoundry;","import React, {Component} from 'react';\nimport ErrorIndicator from '../error-indicator';\n\nexport default class ErrorBoundry extends Component {\n\tstate = {\n\t\thasError: false,\n\t};\n\n\tcomponentDidCatch(error, errorInfo) {\n\t\tthis.setState({\n\t\t\thasError: true\n\t\t});\n\t}\n\n\trender() {\n\t\tif (this.state.hasError) {\n\t\t\treturn <ErrorIndicator/>;\n\t\t}\n\n\t\treturn this.props.children;\n\t}\n}","export default class BookstoreService {\n\tdata = [\n\t\t{\n\t\t\tid: 1,\n\t\t\ttitle: \"Eloquent JavaScript, Second Edition\",\n\t\t\tauthor: \"Marijn Haverbeke\",\n\t\t\tprice: 19,\n\t\t\tcoverImage: \"https://images-na.ssl-images-amazon.com/images/I/51mvaK65SKL._SX376_BO1,204,203,200_.jpg\",\n\t\t},\n\t\t{\n\t\t\tid: 2,\n\t\t\ttitle: \"JavaScript The Good Parts\",\n\t\t\tauthor: \"Douglas Crockford\",\n\t\t\tprice: 13,\n\t\t\tcoverImage: \"https://images-na.ssl-images-amazon.com/images/I/511j6cza5bL._SX379_BO1,204,203,200_.jpg\",\n\n\t\t},\n\t\t{\n\t\t\tid: 3,\n\t\t\ttitle: \"JavaScript The Definitive Guide\",\n\t\t\tauthor: \"David Flanagan\",\n\t\t\tprice: 25,\n\t\t\tcoverImage: \"https://images-na.ssl-images-amazon.com/images/I/51wijnc-Y8L._SX379_BO1,204,203,200_.jpg\",\n\t\t},\n\t\t{\n\t\t\tid: 4,\n\t\t\ttitle: \"Learning React: Modern Patterns for Developing React Apps\",\n\t\t\tauthor: \"Alex Banks\",\n\t\t\tprice: 43,\n\t\t\tcoverImage: \"https://images-na.ssl-images-amazon.com/images/I/51Kwaw5nInL._SX379_BO1,204,203,200_.jpg\",\n\t\t},\n\t\t{\n\t\t\tid: 5,\n\t\t\ttitle: \"Learning JavaScript Design Patterns\",\n\t\t\tauthor: \"Addy Osmani\",\n\t\t\tprice: 33,\n\t\t\tcoverImage: \"https://images-na.ssl-images-amazon.com/images/I/51H-31ivMTL._SX379_BO1,204,203,200_.jpg\",\n\n\t\t},\n\t\t{\n\t\t\tid: 6,\n\t\t\ttitle: \"Speaking JavaScript\",\n\t\t\tauthor: \"Axel Rauschmayer\",\n\t\t\tprice: 25,\n\t\t\tcoverImage: \"https://images-na.ssl-images-amazon.com/images/I/51AOPRqoYTL._SX379_BO1,204,203,200_.jpg\",\n\t\t},\n\t];\n\n\tgetBooks() {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (Math.random() > 0.75) {\n\t\t\t\t\treject(new Error(`Can't get books`));\n\t\t\t\t} else {\n\t\t\t\t\tresolve(this.data);\n\t\t\t\t}\n\t\t\t}, 700);\n\t\t});\n\t}\n}","const updateBookList = (state, action) => {\n    if (state === undefined) {\n        return {\n            books: [],\n            loading: true,\n            error: null,\n        }\n    }\n\n    switch (action.type) {\n        case 'FETCH_BOOKS_REQUEST':\n            return {\n                books: action.payload,\n                loading: false,\n                error: null,\n            };\n        case 'FETCH_BOOKS_SUCCESS':\n            return {\n                books: [],\n                loading: true,\n                error: null,\n            };\n        case 'FETCH_BOOKS_FAILURE':\n            return {\n                books: [],\n                loading: false,\n                error: action.payload,\n            };\n        default:\n            return state.bookList;\n    }\n};\n\nexport default updateBookList;","const updateCartItems = (cartItems, item, index) => {\n    if (item.count === 0) {\n        return [\n            ...cartItems.slice(0, index),\n            ...cartItems.slice(index + 1),\n        ];\n    }\n\n    if (index === -1) {\n        return [\n            ...cartItems,\n            item,\n        ];\n    }\n\n    return [\n        ...cartItems.slice(0, index),\n        item,\n        ...cartItems.slice(index + 1),\n    ];\n};\n\nconst updateCartItem = (book, item = {}, quantity) => {\n    const {\n        id = book.id,\n        count = 0,\n        title = book.title,\n        total = 0,\n    } = item;\n\n    return {\n        id,\n        title,\n        count: count + quantity,\n        total: total + quantity * book.price,\n    };\n};\n\nconst updateOrder = (state, bookId, quantity) => {\n    const {bookList: {books}, shoppingCart: {cartItems: oldCartItems}} = state;\n    const book = books.find(({id}) => id === bookId);\n    const itemIndex = oldCartItems.findIndex(({id}) => id === bookId);\n    const item = oldCartItems[itemIndex];\n    const newItem = updateCartItem(book, item, quantity);\n    const cartItems = updateCartItems(oldCartItems, newItem, itemIndex);\n    const orderTotal = cartItems.reduce(((accumulator, currentValue) => accumulator + currentValue.total), 0);\n\n    return {\n        cartItems,\n        orderTotal,\n    };\n};\n\nconst updateShoppingCart = (state, action) => {\n    if (state === undefined) {\n        return {\n            cartItems: [],\n            orderTotal: 0,\n        }\n    }\n\n    switch (action.type) {\n        case 'BOOK_ADDED_TO_CART':\n            return updateOrder(state, action.payload, 1);\n        case 'BOOK_REMOVED_FROM_CART':\n            return updateOrder(state, action.payload, -1);\n        case 'ALL_BOOKS_REMOVED_FROM_CART':\n            const item = state.shoppingCart.cartItems.find(({id}) => id === action.payload);\n            return updateOrder(state, action.payload, -1 * item.count);\n        default:\n            return state.shoppingCart;\n    }\n};\n\nexport default updateShoppingCart;","import updateBookList from './book-list'\nimport updateShoppingCart from './shoppingCart'\n\nconst reducer = (state, action) => {\n    return {\n        bookList: updateBookList(state, action),\n        shoppingCart: updateShoppingCart(state, action),\n    }\n};\n\nexport default reducer;\n","import {createStore} from 'redux';\n\nimport reducer from './reducers';\n\nconst store = createStore(reducer);\n\nexport default store;","import React from 'react';\nimport ReactDom from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport App from './components/app';\nimport ErrorBoundry from './components/error-boundry';\nimport BookstoreService from './services/bookstore-service';\nimport { BookstoreServiceProvider } from './components/bookstore-service-context';\n\nimport store from './store';\n\nconst bookstoreService = new BookstoreService();\n\nReactDom.render(\n\t<Provider store={store}>\n\t\t<ErrorBoundry>\n\t\t\t<BookstoreServiceProvider value={bookstoreService}>\n\t\t\t\t<Router>\n\t\t\t\t\t<App/>\n\t\t\t\t</Router>\n\t\t\t</BookstoreServiceProvider>\n\t\t</ErrorBoundry>\n\t</Provider>,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}